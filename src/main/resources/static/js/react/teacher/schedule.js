import{r as o,j as e,c as k}from"../shared/client-Cmjl_fXq.js";const p=[{key:"MONDAY",label:"ì›”ìš”ì¼",shortLabel:"ì›”"},{key:"TUESDAY",label:"í™”ìš”ì¼",shortLabel:"í™”"},{key:"WEDNESDAY",label:"ìˆ˜ìš”ì¼",shortLabel:"ìˆ˜"},{key:"THURSDAY",label:"ëª©ìš”ì¼",shortLabel:"ëª©"},{key:"FRIDAY",label:"ê¸ˆìš”ì¼",shortLabel:"ê¸ˆ"}],S=8,g=[{bg:"#dbeafe",border:"#3b82f6",text:"#1e40af"},{bg:"#dcfce7",border:"#22c55e",text:"#166534"},{bg:"#fef9c3",border:"#eab308",text:"#713f12"},{bg:"#fce7f3",border:"#ec4899",text:"#9d174d"},{bg:"#ede9fe",border:"#8b5cf6",text:"#4c1d95"},{bg:"#ffedd5",border:"#f97316",text:"#7c2d12"},{bg:"#e0f2fe",border:"#0ea5e9",text:"#0c4a6e"},{bg:"#f0fdf4",border:"#10b981",text:"#064e3b"}],y=d=>d.substring(0,5),s=d=>({1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY"})[new Date().getDay()]===d;function w(){const[d,a]=o.useState([]),[m,f]=o.useState(!0),[h,b]=o.useState(null),c=o.useCallback(async()=>{try{f(!0);const t=await fetch("/api/teacher/schedule",{credentials:"include"});if(!t.ok)throw new Error(`ì„œë²„ ì˜¤ë¥˜: ${t.status}`);const n=await t.json();a(n),b(null)}catch(t){b(t instanceof Error?t.message:"ì¼ì •ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.")}finally{f(!1)}},[]);o.useEffect(()=>{c()},[c]);const j=o.useCallback(async t=>{if(confirm("ì´ ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{if(!(await fetch(`/api/teacher/schedule/${t}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("ì‚­ì œ ì‹¤íŒ¨");a(l=>l.filter(i=>i.id!==t))}catch(n){alert(n instanceof Error?n.message:"ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},[]);return m?e.jsxs("div",{style:r.center,children:[e.jsx("div",{style:r.spinner}),e.jsx("p",{style:{color:"#6b7280",marginTop:12},children:"ì¼ì •ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):h?e.jsxs("div",{style:{...r.alert,background:"#fef2f2",border:"1px solid #fca5a5",color:"#b91c1c"},children:["âš  ",h,e.jsx("button",{onClick:c,style:r.retryBtn,children:"ë‹¤ì‹œ ì‹œë„"})]}):d.length===0?e.jsxs("div",{style:r.empty,children:[e.jsx("div",{style:{fontSize:48,marginBottom:12},children:"ğŸ“…"}),e.jsx("h6",{style:{color:"#374151",marginBottom:8},children:"ë“±ë¡ëœ ìˆ˜ì—… ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{style:{color:"#9ca3af",marginBottom:16,fontSize:14},children:"ìˆ˜ì—… ì¼ì •ì„ ë“±ë¡í•˜ë©´ ëŒ€ì‹œë³´ë“œì—ì„œ ì˜¤ëŠ˜ì˜ ì‹œê°„í‘œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"}),e.jsx("a",{href:"/teacher/schedule/add",style:r.addBtn,children:"+ ì²« ì¼ì • ë“±ë¡í•˜ê¸°"})]}):e.jsxs("div",{style:{fontFamily:"'Segoe UI', sans-serif"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:16},children:e.jsx("a",{href:"/teacher/schedule/add",style:r.addBtn,children:"+ ì¼ì • ë“±ë¡"})}),e.jsx("div",{style:r.tableWrapper,children:e.jsxs("table",{style:r.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{...r.th,...r.periodHeader,width:90},children:"êµì‹œ"}),p.map(t=>e.jsxs("th",{style:{...r.th,...r.dayHeader,background:s(t.key)?"#1d4ed8":"#4f46e5",borderBottom:s(t.key)?"3px solid #93c5fd":"3px solid transparent"},children:[e.jsx("span",{style:{fontSize:16,fontWeight:700},children:t.shortLabel}),s(t.key)&&e.jsx("span",{style:r.todayBadge,children:"ì˜¤ëŠ˜"})]},t.key))]})}),e.jsx("tbody",{children:Array.from({length:S},(t,n)=>n+1).map(t=>{const n=g[(t-1)%g.length];return e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:r.periodCell,children:e.jsxs("span",{style:{color:"#4f46e5",fontWeight:700,fontSize:13},children:[t,"êµì‹œ"]})}),p.map(l=>{const i=d.find(x=>x.dayOfWeek===l.key&&x.period===t);return e.jsx("td",{style:{...r.cell,background:s(l.key)?"#f0f4ff":"white",borderRight:"1px solid #e5e7eb"},children:i&&e.jsxs("div",{style:{...r.scheduleBlock,background:n.bg,borderLeft:`3px solid ${n.border}`},children:[e.jsx("div",{style:{color:n.text,fontWeight:700,fontSize:14,marginBottom:3},children:i.subjectName}),i.className&&e.jsx("div",{style:{color:"#6b7280",fontSize:11,marginBottom:2},children:i.className}),e.jsxs("div",{style:{color:"#9ca3af",fontSize:11,marginBottom:6},children:[y(i.startTime),"~",y(i.endTime)]}),e.jsxs("div",{style:r.actionRow,children:[e.jsx("a",{href:`/teacher/schedule/edit/${i.id}`,style:r.editBtn,title:"ìˆ˜ì •",children:"âœ"}),e.jsx("button",{onClick:()=>j(i.id),style:r.deleteBtn,title:"ì‚­ì œ",children:"ğŸ—‘"})]})]})},l.key)})]},t)})})]})}),e.jsx("div",{style:r.legend,children:e.jsxs("span",{style:{color:"#9ca3af",fontSize:12},children:["âœ ìˆ˜ì • Â |Â  ğŸ—‘ ì‚­ì œ Â |Â ",e.jsx("span",{style:{background:"#e0e7ff",color:"#4338ca",padding:"2px 8px",borderRadius:4,fontSize:11},children:"ì˜¤ëŠ˜ ì—´ ê°•ì¡° í‘œì‹œ"})]})})]})}const r={center:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 0"},spinner:{width:36,height:36,border:"3px solid #e5e7eb",borderTop:"3px solid #4f46e5",borderRadius:"50%",animation:"spin 0.8s linear infinite"},alert:{padding:"16px 20px",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},retryBtn:{background:"#ef4444",color:"white",border:"none",borderRadius:6,padding:"6px 14px",cursor:"pointer",fontSize:13},empty:{textAlign:"center",padding:"60px 20px",background:"white",borderRadius:12,border:"1px solid #e5e7eb"},addBtn:{display:"inline-block",background:"#4f46e5",color:"white",padding:"8px 20px",borderRadius:8,textDecoration:"none",fontSize:14,fontWeight:600},tableWrapper:{background:"white",borderRadius:12,border:"1px solid #e5e7eb",overflow:"hidden",overflowX:"auto"},table:{width:"100%",borderCollapse:"collapse",minWidth:600},th:{padding:"14px 10px",textAlign:"center",fontSize:14,fontWeight:700},periodHeader:{background:"#f3f4f6",color:"#374151",borderRight:"2px solid #e5e7eb"},dayHeader:{color:"white",position:"relative"},todayBadge:{display:"block",fontSize:10,fontWeight:400,background:"rgba(255,255,255,0.25)",borderRadius:4,padding:"1px 6px",marginTop:3},periodCell:{padding:"8px",textAlign:"center",background:"#f9fafb",borderRight:"2px solid #e5e7eb",minWidth:70},cell:{padding:"6px",verticalAlign:"middle",textAlign:"center",minWidth:120,height:100},scheduleBlock:{borderRadius:6,padding:"8px 10px",display:"inline-block",width:"90%",textAlign:"left",boxSizing:"border-box"},actionRow:{display:"flex",gap:4,justifyContent:"flex-end"},editBtn:{width:24,height:24,borderRadius:4,background:"#e0e7ff",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:12,textDecoration:"none"},deleteBtn:{width:24,height:24,borderRadius:4,background:"#fee2e2",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:12},legend:{marginTop:12,textAlign:"right",padding:"0 4px"}},u=document.getElementById("schedule-root");u&&k(u).render(e.jsx(o.StrictMode,{children:e.jsx(w,{})}));
