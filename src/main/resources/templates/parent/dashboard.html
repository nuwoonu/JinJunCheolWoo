<!doctype html>
<html
  lang="ko"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
  layout:decorate="~{layouts/layout}"
>
  <head>
    <title>Parent Dashboard</title>
  </head>
  <body>
    <div layout:fragment="content">
      <div class="breadcrumb d-flex flex-wrap align-items-center justify-content-between gap-3 mb-24">
        <div class="">
          <h6 class="fw-semibold mb-0">학부모</h6>
          <p class="text-neutral-600 mt-4 mb-0">어서오세요, 부모님</p>
        </div>
      </div>

      <div class="mt-24">
        <!-- My Kids Section -->
        <div class="row gy-4 mb-24">
          <div class="col-12">
            <div class="card h-100">
              <div class="card-body p-0">
                <div
                  class="d-flex flex-wrap align-items-center justify-content-between px-20 py-16 border-bottom border-neutral-200"
                >
                  <h6 class="text-lg mb-0">My Kids</h6>
                  <a href="/parent/children/status" class="text-primary-600 hover-text-primary-700">더보기</a>
                </div>
                <div class="p-20">
                  <!-- 자녀가 없을 때 -->
                  <div th:if="${children == null or children.empty}" class="text-center py-20">
                    <p class="mb-0 text-secondary-light">등록된 학생이 없습니다.</p>
                  </div>
                  <!-- 자녀 목록 -->
                  <div th:if="${children != null and !children.empty}" class="d-flex flex-wrap gap-16">
                    <a
                      th:each="child : ${children}"
                      th:href="@{/soojin/mychildren/status}"
                      class="p-20 rounded text-decoration-none"
                      style="background-color: #e0f4f0; width: 300px; cursor: pointer"
                    >
                      <div class="d-flex align-items-center gap-16">
                        <figure
                          class="w-120-px h-120-px rounded-circle overflow-hidden mb-0 border border-width-4-px border-white"
                        >
                          <img
                            th:src="${child.profileImageUrl}"
                            alt="Student Image"
                            class="w-100 h-100 object-fit-cover"
                          />
                        </figure>
                        <div>
                          <h2 class="h6 text-primary-light mb-16 fw-semibold" th:text="${child.name}"></h2>
                          <p class="mb-0">
                            학번: <span class="text-primary-600 fw-semibold" th:text="${child.studentNumber}"></span>
                          </p>
                        </div>
                      </div>
                      <div class="d-flex flex-column gap-8 border-top border-neutral-300 mt-16 pt-16">
                        <div class="d-flex gap-4">
                          <span class="fw-semibold text-sm text-primary-light w-110-px">학년</span>
                          <span class="fw-normal text-sm text-secondary-light"
                            >: <span th:text="${child.grade}"></span>학년</span
                          >
                        </div>
                        <div class="d-flex gap-4">
                          <span class="fw-semibold text-sm text-primary-light w-110-px">반</span>
                          <span class="fw-normal text-sm text-secondary-light"
                            >: <span th:text="${child.classNum}"></span>반</span
                          >
                        </div>
                      </div>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 공지사항 Section -->
        <!-- <더보기> 학교 공지 페이지로 수정해야함 -->
        <div class="row gy-4 mb-24">
          <div class="col-12">
            <div class="card h-100">
              <div class="card-body p-0">
                <div
                  class="d-flex flex-wrap align-items-center justify-content-between px-20 py-16 border-bottom border-neutral-200"
                >
                  <h6 class="text-lg mb-0">학교 공지</h6>
                  <a href="/dashboard" class="text-primary-600 hover-text-primary-700">더보기</a>
                </div>
                <div class="p-20">
                  <!-- 공지사항이 없을 때 -->
                  <div th:if="${notices == null or notices.empty}" class="text-center py-20">
                    <p class="mb-0 text-secondary-light">등록된 공지사항이 없습니다.</p>
                  </div>
                  <!-- 공지사항 목록 -->
                  <div th:if="${notices != null and !notices.empty}">
                    <ul class="list-unstyled mb-0">
                      <li
                        th:each="notice, stat : ${notices}"
                        class="d-flex justify-content-between align-items-center py-12"
                        th:classappend="${!stat.last} ? 'border-bottom border-neutral-200' : ''"
                      >
                        <a
                          th:href="@{/parent/notice/read(nno=${notice.nno})}"
                          class="text-primary-light hover-text-primary-600 fw-medium text-truncate"
                          style="max-width: 70%"
                          th:text="${notice.title}"
                        ></a>
                        <span
                          class="text-secondary-light text-sm"
                          th:text="${#temporals.format(notice.createDate, 'yyyy-MM-dd')}"
                        ></span>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 학부모 자유게시판 Section -->
        <div class="row gy-4 mb-24">
          <div class="col-12">
            <div class="card h-100">
              <div class="card-body p-0">
                <div
                  class="d-flex flex-wrap align-items-center justify-content-between px-20 py-16 border-bottom border-neutral-200"
                >
                  <h6 class="text-lg mb-0">학부모 게시판</h6>
                  <a th:href="@{/board/parent}" class="text-primary-600 hover-text-primary-700">더보기</a>
                </div>
                <div class="p-20">
                  <!-- 게시글이 없을 때 -->
                  <div th:if="${boards == null or boards.empty}" class="text-center py-20">
                    <p class="mb-0 text-secondary-light">등록된 게시글이 없습니다.</p>
                  </div>
                  <!-- 게시글 목록 -->
                  <div th:if="${boards != null and !boards.empty}">
                    <ul class="list-unstyled mb-0">
                      <li
                        th:each="board, stat : ${boards}"
                        class="d-flex justify-content-between align-items-center py-12"
                        th:classappend="${!stat.last} ? 'border-bottom border-neutral-200' : ''"
                      >
                        <a
                          th:href="@{/parent/board/read(bno=${board.bno})}"
                          class="text-primary-light hover-text-primary-600 fw-medium text-truncate"
                          style="max-width: 70%"
                          th:text="${board.title}"
                        ></a>
                        <span
                          class="text-secondary-light text-sm"
                          th:text="${#temporals.format(board.createDate, 'yyyy-MM-dd')}"
                        ></span>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
