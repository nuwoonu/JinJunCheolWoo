<aside class="sidebar" th:fragment="sidebar" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <button type="button" class="sidebar-close-btn">
    <iconify-icon icon="radix-icons:cross-2"></iconify-icon>
  </button>
  <div class="">
    <div class="sidebar-logo d-flex align-items-center justify-content-between">
      <a th:href="@{/dashboard}" class="">
        <img src="/images/logo.png" alt="site logo" class="light-logo" />
        <img src="/images/logo-light.png" alt="site logo" class="dark-logo" />
        <img src="/images/logo-icon.png" alt="site logo" class="logo-icon" />
      </a>
      <button
        type="button"
        class="text-xxl d-xl-flex d-none line-height-1 sidebar-toggle text-neutral-500"
        aria-label="Collapse Sidebar"
      >
        <i class="ri-contract-left-line"></i>
      </button>
    </div>
  </div>
  <!-- User Info start - 로그인한 사용자만 -->
  <div class="mx-16 py-12" sec:authorize="isAuthenticated()">
    <div class="dropdown profile-dropdown">
      <button
        type="button"
        class="profile-dropdown__button d-flex align-items-center justify-content-between p-10 w-100 overflow-hidden bg-neutral-50 radius-12"
        data-bs-toggle="dropdown"
        data-bs-display="static"
        aria-expanded="false"
      >
        <span class="d-flex align-items-start gap-10">
          <img
            src="/images/thumbs/leave-request-img2.png"
            alt="Thumbnail"
            class="w-40-px h-40-px rounded-circle object-fit-cover flex-shrink-0"
          />
          <span class="profile-dropdown__contents">
            <span class="h6 mb-0 text-md d-block text-primary-light" th:text="${#authentication.principal.username}">User</span>
            <span class="text-secondary-light text-sm mb-0 d-block" th:text="${#authentication.principal.authorities[0].authority}">Role</span>
          </span>
        </span>
        <span class="profile-dropdown__icon pe-8 text-xl d-flex line-height-1">
          <i class="ri-arrow-right-s-line"></i>
        </span>
      </button>
      <ul class="dropdown-menu dropdown-menu-lg-end border p-12">
        <li>
          <a
            th:href="@{/profile}"
            class="dropdown-item rounded text-secondary-light bg-hover-neutral-200 text-hover-neutral-900 d-flex align-items-center gap-2 py-6"
          >
            <i class="ri-user-3-line"></i>
            My Profile
          </a>
        </li>
        <li>
          <a
            th:href="@{/settings}"
            class="dropdown-item rounded text-secondary-light bg-hover-neutral-200 text-hover-neutral-900 d-flex align-items-center gap-2 py-6"
          >
            <i class="ri-settings-3-line"></i>
            Setting
          </a>
        </li>
        <li>
          <a
            th:href="@{/logout}"
            class="dropdown-item rounded text-secondary-light bg-hover-neutral-200 text-hover-neutral-900 d-flex align-items-center gap-2 py-6"
          >
            <i class="ri-shut-down-line"></i>
            Log Out
          </a>
        </li>
      </ul>
    </div>
  </div>
  <!-- User Info end -->
  <div class="sidebar-menu-area">
    <ul class="sidebar-menu" id="sidebar-menu">
      <!-- Dashboard - 로그인한 사용자만 -->
      <li class="dropdown" sec:authorize="isAuthenticated()">
        <a href="javascript:void(0)">
          <i class="ri-home-4-line"></i>
          <span>Dashboard</span>
        </a>
        <ul class="sidebar-submenu">
          <li>
            <a th:href="@{/dashboard}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              School
            </a>
          </li>
        </ul>
      </li>

      <!-- Students - 모든 로그인 사용자 -->
      <li class="dropdown" sec:authorize="isAuthenticated()">
        <a href="javascript:void(0)">
          <i class="ri-graduation-cap-line"></i>
          <span>Students</span>
        </a>
        <ul class="sidebar-submenu">
          <li>
            <a th:href="@{/student/add}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Add New Student
            </a>
          </li>
          <li>
            <a th:href="@{/student/list}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Student List
            </a>
          </li>
        </ul>
      </li>

      <!-- Teachers - TEACHER, ADMIN만 -->
      <li class="dropdown" sec:authorize="hasAnyRole('TEACHER', 'ADMIN')">
        <a href="javascript:void(0)">
          <i class="ri-user-follow-line"></i>
          <span>Teachers</span>
        </a>
        <ul class="sidebar-submenu">
          <li>
            <a th:href="@{/teacher/add}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Add New Teacher
            </a>
          </li>
          <li>
            <a th:href="@{/teacher/teacher-list}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Teacher List
            </a>
          </li>
          <li>
            <a th:href="@{/teacher/edit}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Edit Teacher
            </a>
          </li>
          <li>
            <a th:href="@{/teacher/details}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Teacher Details
            </a>
          </li>
        </ul>
      </li>

      <!-- Guardian - 모든 로그인 사용자 -->
      <li class="dropdown" sec:authorize="isAuthenticated()">
        <a href="javascript:void(0)">
          <i class="ri-account-circle-line"></i>
          <span>Guardian</span>
        </a>
        <ul class="sidebar-submenu">
          <li>
            <a th:href="@{/guardian/add}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Add New Guardian
            </a>
          </li>
          <li>
            <a th:href="@{/guardian/list}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Guardian List
            </a>
          </li>
        </ul>
      </li>

      <!-- Classes - TEACHER, ADMIN만 -->
      <li class="dropdown" sec:authorize="hasAnyRole('TEACHER', 'ADMIN')">
        <a href="javascript:void(0)">
          <i class="ri-list-view"></i>
          <span>Classes</span>
        </a>
        <ul class="sidebar-submenu">
          <li>
            <a th:href="@{/class/list}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Class List
            </a>
          </li>
          <li>
            <a th:href="@{/class/room}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Class Room
            </a>
          </li>
        </ul>
      </li>

      <!-- Examinations - 모든 로그인 사용자 -->
      <li class="dropdown" sec:authorize="isAuthenticated()">
        <a href="javascript:void(0)">
          <i class="ri-file-edit-line"></i>
          <span>Examinations</span>
        </a>
        <ul class="sidebar-submenu">
          <li>
            <a th:href="@{/exam}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Exam
            </a>
          </li>
          <li>
            <a th:href="@{/exam/schedule}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Exam Schedule
            </a>
          </li>
          <li>
            <a th:href="@{/exam/result}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Exam Result
            </a>
          </li>
        </ul>
      </li>

      <!-- Attendance - TEACHER, ADMIN만 -->
      <li class="dropdown" sec:authorize="hasAnyRole('TEACHER', 'ADMIN')">
        <a href="javascript:void(0)">
          <i class="ri-calendar-check-line"></i>
          <span>Attendance</span>
        </a>
        <ul class="sidebar-submenu">
          <li>
            <a th:href="@{/attendance/student}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Student Attendance
            </a>
          </li>
          <li>
            <a th:href="@{/attendance/teacher}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Teacher Attendance
            </a>
          </li>
        </ul>
      </li>

      <!-- Authentication - 비로그인 사용자만 -->
      <li class="dropdown" sec:authorize="!isAuthenticated()">
        <a href="javascript:void(0)">
          <i class="ri-shield-check-line"></i>
          <span>Authentication</span>
        </a>
        <ul class="sidebar-submenu">
          <li>
            <a th:href="@{/login}">
              <i class="ri-circle-fill circle-icon text-primary-600 w-auto"></i>
              Login
            </a>
          </li>
          <li>
            <a th:href="@{/register}">
              <i class="ri-circle-fill circle-icon text-warning-main w-auto"></i>
              Register
            </a>
          </li>
        </ul>
      </li>

      <!-- Settings - ADMIN만 -->
      <li class="dropdown" sec:authorize="hasRole('ADMIN')">
        <a href="javascript:void(0)">
          <i class="ri-user-settings-line"></i>
          <span>Settings</span>
        </a>
        <ul class="sidebar-submenu">
          <li>
            <a th:href="@{/settings/general}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              General
            </a>
          </li>
          <li>
            <a th:href="@{/settings/notification}">
              <i class="ri-circle-fill circle-icon w-auto"></i>
              Notification
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</aside>
